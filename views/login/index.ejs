<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">


    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="JCV Group">
    <meta name="apple-mobile-web-app-title" content="JCV Group">
    <meta name="theme-color" content="#ffffff">
    <meta name="msapplication-navbutton-color" content="#ffffff">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="msapplication-starturl" content="./index.js">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <script src="/sw.js"></script>
    <script src="/service-work.js"></script>

    <link rel="stylesheet" href="/login/css/index.css">
    <link rel="stylesheet" href="/login/css/spinLoad.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/js.cookie.min.js"></script>
    <link rel="stylesheet" href="/panel/css/main/popups.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
    <link rel="shortcut icon" href="/logos/favicon.png" type="image/x-icon">
    <script src="/js/scripts-login.js"></script>
    <title>Log in | JCV Group</title>
</head>
<body>
<section class="index-section-index-page">
    <section class="index-section-main">
        <section class="index-banner-image">
            <div class="index-image-wallpaper">
                <img class="index-bg-background" src="/login/img/bg-fundo.png" alt="" srcset="">
                <div class="index-container-msg-sys">
                    <div class="index-cont-msg">
                        <span id="span-msg">“XX”</span>
                        <span id="span-author">XX</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="index-section-login">
            <div class="index-login-container">
                <form class="index-form-login" action="/login/logar" method="post">
                    <div class="index-login-logo">
                        <a href="/">
                            <img id="image-1" class="index-logo" src="/logos/jcvLogo.png" alt="">
                        </a>
                    </div>
                    <div class="index-title-box">
                        <span>Sistema JCV GROUP</span>
                    </div>
                    <div class="index-inputs-container">
                        <div class="index-row-form">
                            <div class="index-box-input">
                                <label for="">Informe seu CPF</label>
                                <input type="text" id="input-cpf" name="cpfUser">
                            </div>
                        </div>

                        <div class="index-row-form">
                            <div class="index-box-input" id="index-form-container-password">
                                <!--  -->
                            </div>
                        </div>

                        <div class="index-row-commands">
                            <input hidden name="input-link-special" type="text" value="<%= linkspecial %>">
                            <button class="class-loader" type="submit">logar</button>
                        </div>
                        <div class="index-help-pass">
                            <span id="index-recovery-open">Esqueci minha senha</span>
                        </div>
                        <div class="index-install-app">
                            <button type="button" id="setup_button" onclick="installApp()">Instalar App</button>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </section>

    
</section>


<section id="index-recover-pass" class="index-recover-password">
    <section class="index-recover-container-main">
        <div class="index-recover-center">
            <div class="index-recover-header">
                <span>Recupera senha</span>
                <span><i id="index-recover-close" class="ri-close-line"></i></span>
            </div>
            <div class="index-recover-body">
                <form class="index-form-recover" method="post">
                    <div class="index-form-recover-row">
                        <span>Informe seu CPF</span>
                    </div>
                    <div class="index-form-recover-row">
                        <input type="text" name="cpfResetPass" id="input-cpf-reset-pass">
                    </div>
                    <div class="index-form-recover-row-commands">
                        <button formaction="/login/action/reset/pass" class="class-loader" type="submit">Recuperar</button>
                    </div>
                </form>
            </div>
        </div>
    </section>
</section>
<section class="sys-section-loader" id="sys-section-loader">
    <section class="sys-section-load-main">
        <div class="sys-spin-load">
            <div id="loader"></div>
        </div>
    </section>
</section>
<section class="system-section-notification" id="system-section-notification">
    <div class="sys-notifi-container-main" id="sys-notifi-container-main">

        <!-- itens inseridos dinamicamente -->

    </div>
</section>
<section class="system-lgpd-container" id="system-lgpd-container">
    <div class="system-lgpd-main">
        <span>Ao acessar o sistema você automaticamente aceita os nossos termos da Lei Geral de Proteção de Dados Pessoais (LGPD)
            <b><a target="_blank" href="/arquives/LGPD-PROGRAMA-DA-BELEZA.pdf">Clique e veja os termos</a></b>
        </span>
    </div>
</section>
</body>
<script>
    //Limpa os caches gerados pelo pwa
    self.caches.keys().then(keys => { keys.forEach(key => console.log(key)) })
    self.caches.delete('JCV-Group-Sistema');//Nome do cache
    
    //PWA
    let deferredPrompt; // Allows to show the install prompt
    let setupButton;

    window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
        console.log("beforeinstallprompt fired");
        if (setupButton == undefined) {
            setupButton = document.getElementById("setup_button");
        }

        // Show the setup button
        setupButton.style.display = "inline";
        setupButton.disabled = false;

        if(!$("#setup_button").is(':visible')){
            alert('Você possui o aplicativo em sua lista de apps')
        }
    });


    //Install app
    function installApp() {
        // Show the prompt
        deferredPrompt.prompt();
        setupButton.disabled = true;
        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice
            .then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('PWA setup accepted');
                    // hide our user interface that shows our A2HS button
                    setupButton.style.display = 'none';

                    alert('Seu aplicativo foi instalado! Procure por "JCV" em sua lista de apps')
                } else {
                    console.log('PWA setup rejected');
                }
                deferredPrompt = null;
            })
    }
</script>
<script>
    
    //animação das frases
    let textmsg = '<%- frasesIndex %>'.split('//')
    let textauthor = '<%- authorIndex %>'.split('//')

    //Array com CPFs sem senha
    let arrayPassNull = '<%- allAccountPass %>'.split(',')//.map( Number );

</script>
</html>