<link rel="stylesheet" href="/panel/css/calendar/calendar.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/js/moment.js"></script>


<section class="calendar-main">
    <section class="calendar-section-menu">
        <!--  -->
        <div class="calendar-menu-main" id="calendar-menu-main">
            <!--  -->
            <div class="calendar-menu-icons">
                <ul class="calendar-menu-list-inc">
                    <li class="calendar-visible-bottom" title="Calendario" ><a class="class-loader" href="/painel/calendario/main"><i class="ri-home-3-line"></i></a><hr></li>
                    <li class="calendar-visible-bottom" title="Eventos Públicos"><i id="calendar-events-publics" class="ri-calendar-todo-line"></i></li>
                    <li class="calendar-visible-bottom" title="Meus Eventos"><i id="calendar-events-my" class="ri-user-search-line"></i></li>
                    <li class="calendar-visible-bottom" title="Salas"><i id="calendar-events-room" class="ri-door-open-line"></i></li>
                    <% if(GLOBAL_PERM[0].sys_cal_perm_admin == 1){ %>
                        <li><a class="class-loader"  title="Configurações" href="../../room/RoomSettings"><i class="ri-settings-3-line"></i></a></li>
                    <% } %>
                </ul>
            </div>
            <!--  -->
            <div class="calendar-menu-events-all" id="public-events">
                <div class="calendar-menu-events-main-cent">
                    <div class="calendar-menu-close">
                        <i class="ri-close-line calendar-menu-close-command"></i>
                    </div>
                    <!--  -->
                    <div class="calendar-menu-events-title-box">
                        <span>Eventos Públicos</span>
                    </div>
                    <!--  -->
                    <% if(allEventsPublic != ''){ %>
                        <% allEventsPublic.forEach(element => { %>
                            <a class="calendar-menu-events-ul" href="../../event/<%= element.sys_calendar_eventId %>/<%= element.sys_calendar_eventDate %> ">
                                <div class="calendar-menu-events-ul-one">
                                    <i class="ri-calendar-check-fill"></i>
                                </div>
                                <!--  -->
                                <div class="calendar-menu-events-ul-two">
                                    <span><%= element.sys_calendar_eventName %></span>
                                    <span><%= element.jcv_userNamePrimary.split(' ')[0] %> <%= element.jcv_userNamePrimary.split(' ')[1] %> | <%= element.sys_calendar_eventDate %></span>
                                </div>
                            </a>
                            <hr style="width: 95%; margin: 7px 0;">
                        <% }) %>
                    <% }else{ %>
                        <span>Nenhum evento disponível</span>
                    <% } %>
                </div>
            </div>




            <!--  -->
            <!--  -->

            <div class="calendar-menu-events-all" id="my-events">
                <div class="calendar-menu-events-main-cent">
                    <div class="calendar-menu-close">
                        <i class="ri-close-line calendar-menu-close-command"></i>
                    </div>
                    <!--  -->
                    <div class="calendar-menu-events-title-box">
                        <span>Meus Eventos</span>
                    </div>
                    <!--  -->


                    <% if(allEventsPrivate != ''){ %>
                        <% allEventsPrivate.forEach(element => { %>
                            <a class="calendar-menu-events-ul" href="../../event/<%= element.sys_calendar_eventId %>/<%= element.sys_calendar_eventDate %> ">
                                <div class="calendar-menu-events-ul-one">
                                    <i class="ri-calendar-check-fill"></i>
                                </div>
                                <!--  -->
                                <div class="calendar-menu-events-ul-two">
                                    <span><%= element.sys_calendar_eventName %></span>
                                    <% if(element.sys_calendar_eventPublic == 1){ %>
                                        <span>Evento Publico | <%= element.sys_calendar_eventDate %></span>
                                    <% }else{ %>
                                        <span><b>Evento Privado</b> | <%= element.sys_calendar_eventDate %></span>
                                    <% } %>
                                    
                                </div>
                            </a>
                            <hr style="width: 95%; margin: 7px 0;">
                        <% }) %>
                    <% }else{ %>
                        <span>Nenhum evento disponível</span>
                    <% } %>
                    </a>

                </div>
            </div>

            <!--  -->
            <!--  -->

            <div class="calendar-menu-events-all" id="rooms-events">
                <div class="calendar-menu-events-main-cent">
                    <div class="calendar-menu-close">
                        <i class="ri-close-line calendar-menu-close-command"></i>
                    </div>
                    <!--  -->
                    <div class="calendar-menu-events-title-box">
                        <span>Eventos por sala</span>
                    </div>
                    <!--  -->
                    <div class="calendar-box-room-event">

                        
                        <% getAllRooms.forEach(element => { %>
                        <a class="calendar-menu-events-ul" href="/painel/calendario/viewRoom/<%= element.sys_calendar_roomId %>/<%= monthNow.split('/')[0] %>-<%= monthNow.split('/')[1] %>">
                            <div class="calendar-menu-events-ul-one">
                                <i class="ri-calendar-check-fill"></i>
                            </div>
                            <!--  -->
                            <div class="calendar-menu-events-ul-two">
                                <span><%= element.sys_calendar_roomName %></span>

                                <% let countEventsFinal = 0; %>
                                
                                <% let countEvents; %>
                                <% allEventsCount.forEach(elementTwo => { %>

                                    
                                    
                                    <% if (elementTwo.sys_calendar_eventRoom ==  element.sys_calendar_roomId){ %>
                                        
                                        <% let dayNowSet = dayNow.replace(/-/g,'/') %>
                                        <% if(elementTwo.sys_calendar_eventDate >= dayNowSet){ %>
                                            <% countEventsFinal++ %>
                                        <% }else{ %>
                                            <!--  -->
                                        <% } %>
                                    <% } %>

                                <% }) %>

                                <span><%= countEventsFinal%> eventos</span>
                            </div>
                        </a>
                        <hr style="width: 95%; margin: 7px 0;">
                        <% }) %>
                    </div>
                </div>
            </div>
            <!--  -->
        </div>







        
    </section>

    <!--  -->
    <section class="calendar-section-calendar">
        <div class="calendar-main-box">
            <div class="calendar-box">
            
                <div class="calendar-select-month">
                    <div class="calendar-select-month-one">
                        <div class="calendar-select-month-options">
                            <a class="class-loader" href="../<%= previousMonthYear %>"><i class="ri-arrow-up-s-line"></i></a>
                            <a class="class-loader" href="../<%= nextMonthYear %>"><i class="ri-arrow-down-s-line"></i></a>
                        </div>
                        <!--  -->
                        <div class="calendar-select-month-set">
                            <span id="calendar-display-month" ><%= nameMonthYear %></span>
                        </div>
                    </div>
                    <!--  -->
                    <div class="calendar-new-event">
                        <i id="open-new-event-display" class="ri-add-line"></i>
                        <% if(GLOBAL_PERM[0].sys_cal_perm_admin == 1){ %>
                            <a class="class-loader"  title="Configurações" href="../../room/RoomSettings"><i class="ri-settings-3-line"></i></a>
                        <% } %>
                    </div>
                </div>

                <div class="calendar-month-days">
                    <div class="calendar-days-week">
                        <ul id='weeks-desktop' class="calendar-week-days">
                            <li>Domingo</li>
                            <li>Segunda</li>
                            <li>Terça</li>
                            <li>Quarta</li>
                            <li>Quinta</li>
                            <li>Sexta</li>
                            <li>Sábado</li>
                        </ul>
                        <ul id='weeks-mobile' class="calendar-week-days">
                            <li>DOM</li>
                            <li>SEG</li>
                            <li>TER</li>
                            <li>QUA</li>
                            <li>QUI</li>
                            <li>SEX</li>
                            <li>SAB</li>
                        </ul>
                    </div>
                    <div class="calendar-week-days-list">
                        <ul class="calendar-list-days-comp">

                            <% for(let i = 0; i < NumberDayWeek; i++){ %>
                                <li style="cursor: default;"></li>
                            <% } %>

                            <% for(let i = 1; i <= AllDays; i++){ %>
                                <li>
                                    <div onclick="openOptionsDays('<%= i %>/<%= monthNow %>')" class="calendar-day-box">

                                        <% if(i < 10){ %>
                                            <!-- VALIDANDO FERIADOS -->
                                            <% let iValidade = i >= 10 ? i : '0'+i %>
                                            <% let dateNowSet = monthNow.split('/')[1]+'-'+monthNow.split('/')[0]+'-'+iValidade %>

                                            <% let dayFeriado = '';%>
                                            <% arrayFeriados.forEach(element => { %>
                                                
                                                <% if(element.split(' - ')[0] == dateNowSet){ %>
                                                    <% dayFeriado = element.split(' - ')[1] %>
                                                <% } %>
                                

                                            <% })%>

                                            <% if (dayFeriado > ''){ %>
                                                <div title="<%= dayFeriado %>" style="background: var(--color-five); color: var(--color-four);" id="day-<%= '0'+i %>-<%- monthNow.split('/')[0] %>-<%- monthNow.split('/')[1] %>" class="calendar-day-box-day">
                                                    <div class="calendar-feriado-display">
                                                        <b><%= dayFeriado %></b>
                                                    </div>
                                                    <span><%= i %></span>
                                                </div>
                                            <% }else{ %>
                                                <div id="day-<%= '0'+i %>-<%- monthNow.split('/')[0] %>-<%- monthNow.split('/')[1] %>" class="calendar-day-box-day">
                                                    <span><%= i %></span>
                                                </div>
                                            <% } %>

                                        <% }else{ %>
                                            <!-- VALIDANDO FERIADOS -->
                                            <% let iValidade = i >= 10 ? i : '0'+i %>
                                            <% let dateNowSet = monthNow.split('/')[1]+'-'+monthNow.split('/')[0]+'-'+iValidade %>

                                            <% let dayFeriado = '';%>
                                            <% arrayFeriados.forEach(element => { %>
                                                
                                                <% if(element.split(' - ')[0] == dateNowSet){ %>
                                                    <% dayFeriado = element.split(' - ')[1] %>
                                                <% } %>

                                            <% })%>

                                            <% if (dayFeriado > ''){ %>
                                                <div title="<%= dayFeriado %>" style="background: var(--color-five); color: var(--color-four);" id="day-<%= i %>-<%- monthNow.split('/')[0] %>-<%- monthNow.split('/')[1] %>" class="calendar-day-box-day">
                                                    <div class="calendar-feriado-display">
                                                        <b><%= dayFeriado %></b>
                                                    </div>
                                                    <span><%= i %></span>
                                                </div>
                                            <% }else{ %>
                                                <div id="day-<%= i %>-<%- monthNow.split('/')[0] %>-<%- monthNow.split('/')[1] %>" class="calendar-day-box-day">
                                                    <span><%= i %></span>
                                                </div>
                                            <% } %>

                                        <% } %>

                                        <!--  -->

                                        <div class="calendar-day-box-list-events">
                                            <ul class="claendar-list-events">
                                                <% for(let jj = 0; jj < allEventsMonth.length; jj++){ %>
                                                    <% if(allEventsMonth[jj].sys_calendar_eventDate == (i < 10 ? '0'+i : i)+'/'+monthNow){ %>
                                                        
                                                        <% let arrayPersons = allEventsMonth[jj].sys_calendar_eventPersons.indexOf('[') > -1 ? JSON.parse(allEventsMonth[jj].sys_calendar_eventPersons) : allEventsMonth[jj].sys_calendar_eventPersons.split(',').map(function(value){return parseInt(value)}) %>

                                                        <!-- Validando se é o mes atual -->
                                                        <% if(monthAgo == 1){ %>
                                                            <!-- Mes atual -->

                                                            <% if(allEventsMonth[jj].sys_calendar_eventDate < dayNow.split('-')[0]+'/'+dayNow.split('-')[1]+'/'+dayNow.split('-')[2]){ %>
                                                                <!-- Eventos anteriores da data atual -->
                                                                
                                                                <!-- Evento não sera exibido -->
                                                            <% }else{ %>
                                                                <!-- Eventos futuro a data atual -->
    
                                                                <% if(allEventsMonth[jj].sys_calendar_eventUserId == GLOBAL_DASH[0]){ %>
                                                                    <li>
                                                                        <div style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>">
                                                                            <b style="font-weight: 700;"><i style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="ri-checkbox-blank-circle-fill"></i>
                                                                                ⠀<%= allEventsMonth[jj].jcv_userNamePrimary.split(' ')[0] %> | <%= allEventsMonth[jj].sys_calendar_eventHours %>
                                                                            </b>
                                                                        </div>
                                                                        <p style="font-size: 0.8rem ;color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="calendar-cicle">
                                                                            <i class="ri-checkbox-blank-circle-fill"></i>
                                                                        </p>
                                                                        <div class="calendar-info-floating">
                                                                            <span><%= allEventsMonth[jj].sys_calendar_eventName %></span>
                                                                            <% if(allEventsMonth[jj].sys_calendar_eventDescription != ''){ %>
                                                                                <span><%= allEventsMonth[jj].sys_calendar_eventDescription %></span>
                                                                                
                                                                            <% }else{ %>
                                                                                <span>Sem descrição..</span>
                                                                                
                                                                            <% } %>
                                                                            <span><b><%= arrayPersons.length %> pessoa(s)</b> | <span style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>;"><%= allEventsMonth[jj].sys_calendar_roomName %></span></span>
                                                                            <div class="calendar-info-floating-users">
                                                                                <% if(arrayPersons.length == 1){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length == 2){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length == 3){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length > 3){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs">+<%= arrayPersons.length - 3 %></div>
                                                                                <% } %>
                                                                            </div>
                                                                            <div class="calendar-command-floating">
                                                                                <button class="close-options-days-link" type="button" onclick="$.openEditEvent('<%= allEventsMonth[jj].sys_calendar_eventId %>')"><i class="ri-pencil-line"></i></button>
                                                                                <a class="close-options-days-link" href="/painel/calendario/download/<%= allEventsMonth[jj].sys_calendar_nameIcs %>"><i class="ri-calendar-event-line"></i></a>
                                                                                <a class="close-options-days-link class-loader" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>"><i class="ri-eye-line"></i></a>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                <% }else if(arrayPersons.indexOf(''+GLOBAL_DASH[0]) != -1){ %>
                                                                    <li>
                                                                        <div style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %> ">
                                                                            <b style="font-weight: 700;"><i style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="ri-checkbox-blank-circle-fill"></i>
                                                                                ⠀<%= allEventsMonth[jj].jcv_userNamePrimary.split(' ')[0] %> | <%= allEventsMonth[jj].sys_calendar_eventHours %>
                                                                            </b>
                                                                        </div>
                                                                        <p style="font-size: 0.8rem ;color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="calendar-cicle">
                                                                            <i class="ri-checkbox-blank-circle-fill"></i>
                                                                        </p>
                                                                        <div class="calendar-info-floating">
                                                                            <span><%= allEventsMonth[jj].sys_calendar_eventName %></span>
                                                                            <% if(allEventsMonth[jj].sys_calendar_eventDescription != ''){ %>
                                                                                <span><%= allEventsMonth[jj].sys_calendar_eventDescription %></span>
                                                                                
                                                                            <% }else{ %>
                                                                                <span>Sem descrição..</span>
                                                                                
                                                                            <% } %>
                                                                            <span><b><%= arrayPersons.length %> pessoa(s)</b> | <span style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>;"><%= allEventsMonth[jj].sys_calendar_roomName %></span></span>
                                                                            <div class="calendar-info-floating-users">
                                                                                <% if(arrayPersons.length == 1){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length == 2){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length == 3){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length > 3){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs">+<%= arrayPersons.length - 3 %></div>
                                                                                <% } %>
                                                                            </div>
                                                                            <div class="calendar-command-floating">
                                                                               <a class="close-options-days-link class-loader" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>"><i class="ri-eye-line"></i></a>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                <% }else{ %>
                                                                    <li>
                                                                        <div style="background: transparent; color: gray;" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %> ">
                                                                            <i style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="ri-checkbox-blank-circle-line"></i>⠀
                                                                            <%= allEventsMonth[jj].jcv_userNamePrimary.split(' ')[0] %> | <%= allEventsMonth[jj].sys_calendar_eventHours %>
                                                                        </div>
                                                                        <p style="font-size: 0.8rem ;color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="calendar-cicle">
                                                                            <i class="ri-checkbox-blank-circle-line"></i>
                                                                        </p>
                                                                        <div class="calendar-info-floating">
                                                                            <span><%= allEventsMonth[jj].sys_calendar_eventName %></span>
                                                                            <% if(allEventsMonth[jj].sys_calendar_eventDescription != ''){ %>
                                                                                <span><%= allEventsMonth[jj].sys_calendar_eventDescription %></span>
                                                                                
                                                                            <% }else{ %>
                                                                                <span>Sem descrição..</span>
                                                                                
                                                                            <% } %>
                                                                            <span><b><%= arrayPersons.length %> pessoa(s)</b> | <span style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>;"><%= allEventsMonth[jj].sys_calendar_roomName %></span></span>
                                                                            <div class="calendar-info-floating-users">
                                                                                <% if(arrayPersons.length == 1){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length == 2){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length == 3){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                <% }else if(arrayPersons.length > 3){ %>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                    <div class="calendar-info-floating-boxs">+<%= arrayPersons.length - 3 %></div>
                                                                                <% } %>
                                                                            </div>
                                                                            <div class="calendar-command-floating">
                                                                                <a class="close-options-days-link class-loader" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>"><i class="ri-eye-line"></i></a>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                <% } %>
    
                                                            <% } %>
                                                        <% }else{ %>
                                                            <!-- Não é o mes atual -->
                                                            <% if(allEventsMonth[jj].sys_calendar_eventUserId == GLOBAL_DASH[0]){ %>
                                                                <li>
                                                                    <div style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %> ">
                                                                        <b style="font-weight: 700;"><i style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="ri-checkbox-blank-circle-fill"></i>
                                                                            ⠀<%= allEventsMonth[jj].jcv_userNamePrimary.split(' ')[0] %> | <%= allEventsMonth[jj].sys_calendar_eventHours %>
                                                                        </b>
                                                                    </div>
                                                                    <p style="font-size: 0.8rem ;color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="calendar-cicle">
                                                                        <i class="ri-checkbox-blank-circle-fill"></i>
                                                                    </p>
                                                                    <div class="calendar-info-floating">
                                                                        <span><%= allEventsMonth[jj].sys_calendar_eventName %></span>
                                                                        <% if(allEventsMonth[jj].sys_calendar_eventDescription != ''){ %>
                                                                            <span><%= allEventsMonth[jj].sys_calendar_eventDescription %></span>
                                                                            
                                                                        <% }else{ %>
                                                                            <span>Sem descrição..</span>
                                                                            
                                                                        <% } %>
                                                                        <span><b><%= arrayPersons.length %> pessoa(s)</b> | <span style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>;"><%= allEventsMonth[jj].sys_calendar_roomName %></span></span>
                                                                        <div class="calendar-info-floating-users">
                                                                            <% if(arrayPersons.length == 1){ %>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <% }else if(arrayPersons.length == 2){ %>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                            <% }else if(arrayPersons.length == 3){ %>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                            <% }else if(arrayPersons.length > 3){ %>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                                <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                                <div class="calendar-info-floating-boxs">+<%= arrayPersons.length - 3 %></div>
                                                                            <% } %>
                                                                        </div>
                                                                        <div class="calendar-command-floating">
                                                                            <button class="close-options-days-link" type="button" onclick="$.openEditEvent('<%= allEventsMonth[jj].sys_calendar_eventId %>')"><i class="ri-pencil-line"></i></button>
                                                                            <a class="close-options-days-link" href="/painel/calendario/download/<%= allEventsMonth[jj].sys_calendar_nameIcs %>"><i class="ri-calendar-event-line"></i></a>
                                                                            <div href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>"><i class="ri-eye-line"></i></a>
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                            <% }else if(arrayPersons.indexOf(''+GLOBAL_DASH[0]) != -1){ %>
                                                                <li><div style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %> ">
                                                                    <b style="font-weight: 700;">
                                                                        <i style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="ri-checkbox-blank-circle-fill"></i>
                                                                        ⠀<%= allEventsMonth[jj].jcv_userNamePrimary.split(' ')[0] %> | <%= allEventsMonth[jj].sys_calendar_eventHours %>
                                                                    </b>
                                                                </div>
                                                                <p style="font-size: 0.8rem ;color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="calendar-cicle">
                                                                    <i class="ri-checkbox-blank-circle-fill"></i>
                                                                </p>
                                                                <div class="calendar-info-floating">
                                                                    <span><%= allEventsMonth[jj].sys_calendar_eventName %></span>
                                                                    <% if(allEventsMonth[jj].sys_calendar_eventDescription != ''){ %>
                                                                        <span><%= allEventsMonth[jj].sys_calendar_eventDescription %></span>
                                                                        
                                                                    <% }else{ %>
                                                                        <span>Sem descrição..</span>
                                                                        
                                                                    <% } %>
                                                                    <span><b><%= arrayPersons.length %> pessoa(s)</b> | <span style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>;"><%= allEventsMonth[jj].sys_calendar_roomName %></span></span>
                                                                    <div class="calendar-info-floating-users">
                                                                        <% if(arrayPersons.length == 1){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                        <% }else if(arrayPersons.length == 2){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                        <% }else if(arrayPersons.length == 3){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                        <% }else if(arrayPersons.length > 3){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs">+<%= arrayPersons.length - 3 %></div>
                                                                        <% } %>
                                                                    </div>
                                                                    <div class="calendar-command-floating">
                                                                        <a class="close-options-days-link class-loader" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>"><i class="ri-eye-line"></i></a>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <% }else{ %>
                                                            <li>
                                                                <div style="background: transparent; color: gray;" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %> ">
                                                                    <i style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="ri-checkbox-blank-circle-line"></i>
                                                                    ⠀<%= allEventsMonth[jj].jcv_userNamePrimary.split(' ')[0] %> | <%= allEventsMonth[jj].sys_calendar_eventHours %>
                                                                </div>
                                                                <p style="font-size: 0.8rem ;color: <%= allEventsMonth[jj].sys_calendar_roomColor %>" class="calendar-cicle">
                                                                    <i class="ri-checkbox-blank-circle-line"></i>
                                                                </p>
                                                                <div class="calendar-info-floating">
                                                                    <span><%= allEventsMonth[jj].sys_calendar_eventName %></span>
                                                                    <% if(allEventsMonth[jj].sys_calendar_eventDescription != ''){ %>
                                                                        <span><%= allEventsMonth[jj].sys_calendar_eventDescription %></span>
                                                                    <% }else{ %>
                                                                        <span>Sem descrição..</span>
                                                                    <% } %>
                                                                    <span><b><%= arrayPersons.length %> pessoa(s)</b> | <span style="color: <%= allEventsMonth[jj].sys_calendar_roomColor %>;"><%= allEventsMonth[jj].sys_calendar_roomName %></span></span>
                                                                    <div class="calendar-info-floating-users">
                                                                        <% if(arrayPersons.length == 1){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                        <% }else if(arrayPersons.length == 2){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                        <% }else if(arrayPersons.length == 3){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                        <% }else if(arrayPersons.length > 3){ %>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[0]][0] %>"><img src="<%= allUsersSystem[arrayPersons[0]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[1]][0] %>"><img src="<%= allUsersSystem[arrayPersons[1]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs" title="<%= allUsersSystem[arrayPersons[2]][0] %>"><img src="<%= allUsersSystem[arrayPersons[2]][1] %>" alt=""></div>
                                                                            <div class="calendar-info-floating-boxs">+<%= arrayPersons.length - 3 %></div>
                                                                        <% } %>
                                                                    </div>
                                                                    <div class="calendar-command-floating">
                                                                        <a class="close-options-days-link class-loader" href="/painel/calendario/event/<%= allEventsMonth[jj].sys_calendar_eventId %>/<%= allEventsMonth[jj].sys_calendar_eventDate %>"><i class="ri-eye-line"></i></a>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <% } %>
                                                        <% } %>
                                                    <% } %>
                                                <% } %>
                                            </ul>
                                        </div>
                                    </div>
                                </li>
                            <% } %>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>

<!-- AÇÃO AO CLICAR NO DIA (OPTIONS) -->
<section class="calendar-display-actions" id="calendar-display-actions">
    <div class="calendar-display-select">
        <div class="calendar-option-close">
            <i id="close-options-days" class="ri-close-line"></i>
        </div>
        <div class="calendar-options-list">
            <div id="open-event-display-day" class="calendar-display-new">
                <i class="ri-add-line"></i>
                <span>Novo Evento</span>
            </div>
            <!--  -->
            <div class="calendar-display-list">
                <a class="class-loader" id="calendar-day-link-module"><i class="ri-calendar-todo-line"></i></a>
                <span>Ver Eventos</span>
            </div>
        </div>
    </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<!-- PARTIALS NOVO EVENTO -->
<%- include('../../partials/panel/calendario/newEvent') %>
<!-- PARTIALS VIEW EVENTO -->
<%- include('../../partials/panel/calendario/editEvent') %>

<script>
    $(function(){

        //Setando a data no calendario
        const dateNowCalendar = "<%- dayNow %>";
        console.log(dateNowCalendar)
        $("#day-"+dateNowCalendar).css("color","var(--color-four)")
        $("#day-"+dateNowCalendar).css("background","var(--color-one)")

        //DISPLAY DE EVENTOS
        let eventsMy = $("#my-events")
        let eventRooms = $("#rooms-events")
        let eventPublic = $("#public-events");

        eventsMy.css('display','none');
        eventRooms.css('display','none');

        //Exibindo meus eventos
        $("#calendar-events-my").click(function(){
            eventPublic.css('display','none');
            eventRooms.css('display','none');
            eventsMy.fadeIn();
        })

        //Exibindo eventos publicos
        $("#calendar-events-publics").click(function(){
            eventsMy.css('display','none');
            eventRooms.css('display','none');

            eventPublic.fadeIn();
        })

        //Exibindo eventos das salas
        $("#calendar-events-room").click(function(){
            eventsMy.css('display','none');
            eventPublic.css('display','none');

            eventRooms.fadeIn();
        })


        /////////////////////////////////////////
        /* MENU CLOSE */
        $(".calendar-menu-close-command").click(function(){
            //$("#calendar-menu-main").toggle()
            //$("#calendar-menu-main").animate({width: "toggle"},100);
            $(".calendar-menu-events-all").fadeOut()
        })

        
        /* o open esta no final da linha */
        /* CLOSE MENU OPTIONS */
        $("#close-options-days").click(function(){
            $("#calendar-display-actions").fadeOut()
        })


        /* OPEN DISPLAY EVENT DAY */
        $("#open-event-display-day").click(function(){
            $("#calendar-display-actions").fadeOut()

            //$("#calendar-display-event").fadeIn();                   ANTIGO
            //$("#calendar-display-event").css('display','flex');      ANTIGO 
            
            $("#event-new-section-main").fadeIn().css({'display':'flex'})
            $("#event-new-display-main").animate({'margin-top': '-5%'}, "slow");

        })
        /* CLOSE DISPLAY EVENT DAY */
        $("#event-close-display-day").click(function(){
            $("#calendar-display-event").fadeOut();
        })

        /* OPEN DISPLAY NEW EVENT DAY */
        /* $("#open-new-event-display-day").click(function(){
            $("#calendar-display-actions").fadeOut()
            $("#calendar-display-event").fadeIn();
            $("#calendar-display-event").css('display','flex');
        }) */

        /* BUTTON CLOSE EVENT REGISTER */
        $("#calendar-close-event").click(function(){
            $("#calendar-display-event").fadeOut();
        })
    })

    /* OPEN MENU OPTIONS */
    function openOptionsDays(day){

        let getMonth = day.split('/')[0]+' de <%- nameMonthYear %>';
        $("#event-new-dinamic-date").text(getMonth)

        let dayConfig = day.split('/')[0] < 10 ? '0'+day.split('/')[0] : day.split('/')[0];
        let valueDate = day.split('/')[2]+  '-'  +day.split('/')[1]+'-'  +  dayConfig;
        $("#event-new-register-date").val(valueDate)

        //console.log(valueDate)
        //console.log(moment().format("YYYY-MM-DD"))

        //console.log('dia do evento maior')
        //Valor do link do dia
        let dayLinkOpen = dayConfig + '-' + day.split('/')[1]+  '-'  +day.split('/')[2];
        $("#calendar-day-link-module").attr('href','/painel/calendario/viewEvent/Day/'+dayLinkOpen)

        $(".calendar-display-actions").fadeIn()
        $(".calendar-display-actions").css('display','flex')

        if(moment().format(valueDate) < moment().format("YYYY-MM-DD")){
            //console.log('dia do evento menor')
            /* CLOSE DISPLAY EVENT DAY */
            
            $("#open-event-display-day").css('display','none')
        }else{
            //Ele pode fazer eventos neste dia
            $("#open-event-display-day").css('display','flex')
        }        
    }

    let monthNow = '<%- monthNow %>'
    if(moment().format("MM/YYYY") != monthNow){
        $("#calendar-display-month").append("  <p id='cal-sep'>|<p>  <a class='class-loader' style='font-size: 0.9rem; color: var(--color-four)' href='/painel/calendario/main/'>Mês atual <i class='ri-external-link-line'></i></a>")
    }

    //Close box
    $("#close-display-info-box").click(function(){
        setTimeout(() => {
            $("#calendar-display-actions").css('display','none')
        }, 100);
    })

    //Marcação da opção
    $(".calendar-visible-bottom").click(function(){
        $('.calendar-visible-bottom hr').remove();
        $(this).append('<hr>')
    })

    $(".close-options-days-link").click(function(){
        setTimeout(() => {
            $("#calendar-display-actions").css('display','none')
        }, 100);
    })

</script>